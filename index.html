<!doctype html>
<meta charset="utf-8" />
<title>TS Runner (No Sign-in)</title>
<style>
  body { font-family: system-ui, sans-serif; margin: 16px; }
  textarea { width: 100%; height: 200px; }
  pre { background:#f4f4f4; padding:12px; white-space:pre-wrap; }
  button { padding:8px 14px; }
</style>

<h1>TypeScript Runner (No Account)</h1>
<p>左のTSを「Run」で実行。console.log は下に表示されます。</p>

<textarea id="code">// Day 1 sample
let message: string = "Hello, TypeScript!";
let count: number = 42;
let isActive: boolean = true;

console.log(message);
console.log("count:", count);
console.log("isActive:", isActive);
</textarea>
<br/>
<button id="run">Run</button>
<pre id="out"></pre>

<!-- TypeScript compiler (browser) をCDNから読み込み -->
<script src="https://unpkg.com/typescript@5.6.3/lib/typescript.js"></script>
<script>
const outEl = document.getElementById('out');
function logLine(...args){ outEl.textContent += args.join(' ') + '\n'; }
const origLog = console.log;
console.log = (...a)=>{ origLog(...a); logLine(...a); };

document.getElementById('run').onclick = () => {
  outEl.textContent = '';
  const tsCode = document.getElementById('code').value;
  try {
    // TS → JS へ変換（型は実行時には消える）
    const js = ts.transpileModule(tsCode, {
      compilerOptions: { target: ts.ScriptTarget.ES2020, module: ts.ModuleKind.ES2020 }
    }).outputText;
    // 変換したJSを実行（sandbox風にnew Function）
    new Function(js)();
  } catch (e) {
    logLine('Error:', e.message || e);
  }
};
</script>